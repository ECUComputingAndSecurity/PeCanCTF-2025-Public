<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Honey Market - Products</title>
    <link href="https://cdn.jsdelivr.net/npm/daisyui@5" rel="stylesheet" type="text/css" />
    <link href="https://cdn.jsdelivr.net/npm/daisyui@5/themes.css" rel="stylesheet" type="text/css" />
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='imgs/bee.png') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/font.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/product.css') }}">
</head>

<script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.8.3/angular.min.js"
    integrity="sha512-KZmyTq3PLx9EZl0RHShHQuXtrvdJ+m35tuOiwlcZfs/rE7NZv29ygNA8SFCkMXTnYZQK2OX0Gm2qKGfvWEtRXA=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/sass.js/0.9.2/sass.min.js"
    integrity="sha512-mA5b7w9mZvGLWgjIqp9KhWNzkkZ/H3gC4Ua6GOn9m/xl1UF4ghH8GsriKvAYxLsxoKvn6NdebW7kZ6iGB3CGSg=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<body ng-app="honeyApp" ng-controller="honeyController">

    <div id="frame">

        <div id="content">
            <h1>Trophies</h1>
            <form action="" method="GET" id="searchbar" data-theme="dark" class="join">
                <div>
                    <label class="input join-item">
                        <svg style="fill: white" class="h-[1em] opacity-50" xmlns="http://www.w3.org/2000/svg"
                            viewBox="0 0 448 512">
                            <path
                                d="M50.7 58.5L0 160l208 0 0-128L93.7 32C75.5 32 58.9 42.3 50.7 58.5zM240 160l208 0L397.3 58.5C389.1 42.3 372.5 32 354.3 32L240 32l0 128zm208 32L0 192 0 416c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-224z" />
                        </svg>
                        <input name="search" value="{{searchTerm}}" class="input-secondary" placeholder="Product name..." />
                    </label>
                </div>
                <button type="submit" class="btn btn-secondary join-item">Search</button>
            </form>

            <!-- Optional, only appear once searched -->
            {% if length==0 %}
            <div id="notfound">
                <svg xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 576 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.-->
                    <path
                        d="M88.7 223.8L0 375.8 0 96C0 60.7 28.7 32 64 32l117.5 0c17 0 33.3 6.7 45.3 18.7l26.5 26.5c12 12 28.3 18.7 45.3 18.7L416 96c35.3 0 64 28.7 64 64l0 32-336 0c-22.8 0-43.8 12.1-55.3 31.8zm27.6 16.1C122.1 230 132.6 224 144 224l400 0c11.5 0 22 6.1 27.7 16.1s5.7 22.2-.1 32.1l-112 192C453.9 474 443.4 480 432 480L32 480c-11.5 0-22-6.1-27.7-16.1s-5.7-22.2 .1-32.1l112-192z" />
                </svg>
                <label>No results found. </label>
            </div>
            {% endif %}

            <div id="products" class="loaded">
                {% for i in products %}
                <div ng-mouseenter="pickme('{{i.title}}')" ng-mouseleave="unpick()" onmouseenter="playClicksound()"
                    data-theme="dark" class="card bg-base-100 card-sm shadow-sm">
                    <div class="card-body prod">
                        <div class="mb-3">
                            <img src="{{ url_for('static', filename='imgs/' ~ i.picture) }}" />
                            <h2 class="card-title">{{i.title}}</h2>
                        </div>
                        <p>{{i.brief}}
                        </p>
                        <label><b class="text-red-500">Price</b>: {{i.price}} â‚¿TC</label>
                        <div class="justify-end card-actions">
                            <a href="{{ url_for('item_page', productID=i.id) }}" class="btn btn-warning">Buy now</a>
                        </div>
                    </div>
                </div>

                {% endfor %}
            </div>

        </div>

        <div id="banner">

            <a href="/">
                <img src="{{ url_for('static', filename='imgs/bee.png') }}" />
                <h1>Honeymarket</h1>
            </a>

            <label ng-class="{'selected': selectedClass}" id="">{{ '{{selected}}' }}</label>

        </div>


    </div>
    <div id="content">
</body>

<script>


    // Load the audio file for caching purposes
    const sound = (new Audio('{{ url_for("static", filename="clicksound.mp3") }}'));
    const playClicksound = () => sound.cloneNode(true).play()

    angular.module('honeyApp', []).controller('honeyController', function ($scope, $location, $sce) {
        $scope.selected = "Select a product";
        $scope.selectedClass = false;
        $scope.products = []
        $scope.pickme = (v) => {
            $scope.selected = v;
            $scope.selectedClass = true
        }
        $scope.unpick = (v) => {
            $scope.selected = 'Select a product';
            $scope.selectedClass = false
        }
    });

</script>

</html>